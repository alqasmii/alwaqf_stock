# ูุญูุธุฉ ุงูููู ุงูุฎูุฑู ๐
## Al Waqf Muscat โ MSX Live Portfolio Tracker

ูุธุงู ุชุชุจุน ูุญูุธุฉ ุงูุฃุณูู ูู **ูุคุณุณุฉ ุงูููู ุงูุฎูุฑู** ูู ุณูู ูุณูุท ููุฃูุฑุงู ุงููุงููุฉ (MSX).

---

## ูููู ุงููุดุฑูุน

```
waqf-portfolio/
โโโ backend/                     # ุงูุฎุงุฏู ุงูุฎููู (Python + FastAPI)
โ   โโโ main.py                  # ุงูุฎุงุฏู ุงูุฑุฆูุณู + ููุงุท ุงูููุงูุฉ (API Endpoints)
โ   โโโ portfolio_data.py        # ุจูุงูุงุช ุงููุญูุธุฉ ุงูุซุงุจุชุฉ + ููุทู ุงูุญุณุงุจ
โ   โโโ scraper.py               # ูุฌุชูุจ ุฃุณุนุงุฑ MSX + ูุธุงู ุงูุงุญุชูุงุท
โ   โโโ .env.prices              # ุฃุณุนุงุฑ ูุฏููุฉ ุงุญุชูุงุทูุฉ (ูุงุจูุฉ ููุชุนุฏูู)
โ   โโโ requirements.txt         # ูุชุทูุจุงุช Python
โ
โโโ frontend/                    # ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Next.js 14 + TypeScript)
โ   โโโ app/
โ   โ   โโโ layout.tsx           # ุชุฎุทูุท ุฑุฆูุณู ุจุดุฑูุท ุงูุชููู ุงูุนุฑุจู
โ   โ   โโโ page.tsx             # ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ
โ   โ   โโโ globals.css          # ุชุตููู ุนุงููู (ุฏุงูู + ุฐูุจู + RTL)
โ   โ   โโโ stock/[id]/page.tsx  # ุตูุญุฉ ุชูุงุตูู ูู ูุฑูุฒ ุงุณุชุซูุงุฑู
โ   โโโ components/
โ   โ   โโโ Cards.tsx            # ุจุทุงูุฉ ุงูุฅุญุตุงุก + ุจุทุงูุฉ ุงููุฑูุฒ
โ   โ   โโโ PortfolioTable.tsx   # ุฌุฏูู ุงููุญูุธุฉ ุงููุงูู
โ   โ   โโโ RefreshButton.tsx    # ุฒุฑ ุงูุชุญุฏูุซ ุงูููุฑู
โ   โโโ lib/api.ts               # ุฏูุงู ุฌูุจ ุงูุจูุงูุงุช + ุชุนุฑูู ุงูุฃููุงุน
โ   โโโ package.json
โ
โโโ start.bat                    # ุณูุฑูุจุช ุชุดุบูู ููุญุฏ (Windows)
```

---

## ุจูุงูุงุช ุงููุญูุธุฉ (ุงููุณุชุฎุฑุฌุฉ ูู ุงููุซููุฉ)

| # | ุงูุฃุตู | ุงูุฑูุฒ | ุนุฏุฏ ุงูุฃุณูู | ุณุนุฑ ุงูุดุฑุงุก | ูููุฉ ุงูุงุณุชุซูุงุฑ |
|---|-------|-------|-----------|-----------|---------------|
| 1 | ุฃู ููู ููุฅุณุชูุดุงู ูุงูุฅูุชุงุฌ โ ุงูุตููุฉ ุงูุฃููู | OQEP | 274,000 | 0.390 ุฑ.ุน | 107,000 ุฑ.ุน |
| 2 | ุตูุฏูู ุฅุดุฑุงู ุงููููู | โ | 100,000 | 1.020 ุฑ.ุน | 100,000 ุฑ.ุน |
| 3 | ุฃู ููู ููุตูุงุนุงุช ุงูุฃุณุงุณูุฉ | OQPI | 148,219 | 0.100 ุฑ.ุน | 14,877 ุฑ.ุน |
| 4 | ุฃู ููู ููุฅุณุชูุดุงู ูุงูุฅูุชุงุฌ โ ุงูุตููุฉ ุงูุซุงููุฉ | OQEP | 73,259 | 0.341 ุฑ.ุน | 24,999.597 ุฑ.ุน |

---

## ูุชุทูุจุงุช ุงูุชุดุบูู

- Python 3.10+
- Node.js 18+
- npm 9+

---

## ุชุนูููุงุช ุงูุชุดุบูู ุงููุญูู

### ุงูุฎุทูุฉ 1 โ ุชุซุจูุช ูุชุทูุจุงุช ุงูุฎุงุฏู ุงูุฎููู

```bash
cd waqf-portfolio/backend
pip install -r requirements.txt
```

### ุงูุฎุทูุฉ 2 โ ุชุซุจูุช ูุชุทูุจุงุช ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

```bash
cd waqf-portfolio/frontend
npm install
```

### ุงูุฎุทูุฉ 3 โ ุชุดุบูู ุงููุดุฑูุน

**ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ (Windows):**
```
ุงููุฑ ูุฒุฏูุฌุงู ุนูู: start.bat
```

**ุฃู ูุฏููุงู ูู ูุงูุฐุชูู ูููุตูุชูู:**

```bash
# ูุงูุฐุฉ 1 โ ุงูุฎุงุฏู ุงูุฎููู
cd waqf-portfolio/backend
python -m uvicorn main:app --reload --port 8000

# ูุงูุฐุฉ 2 โ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
cd waqf-portfolio/frontend
npm run dev
```

### ุงูุฎุทูุฉ 4 โ ูุชุญ ุงูุชุทุจูู

| ุงูุฑุงุจุท | ุงููุตู |
|--------|-------|
| http://localhost:3000 | ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ |
| http://localhost:3000/stock/oqep_1 | ุชูุงุตูู OQEP ุงูุตููุฉ ุงูุฃููู |
| http://localhost:3000/stock/oqep_2 | ุชูุงุตูู OQEP ุงูุตููุฉ ุงูุซุงููุฉ |
| http://localhost:3000/stock/oqpi | ุชูุงุตูู OQPI |
| http://localhost:3000/stock/ishraq | ุชูุงุตูู ุตูุฏูู ุฅุดุฑุงู ุงููููู |
| http://localhost:8000/docs | ุชูุซูู API ุงูุชูุงุนูู |

---

## ููุทู ุงูุฃุณุนุงุฑ ุงูุญูุฉ

ูุณุชุฎุฏู ุงููุธุงู ุซูุงุซ ุงุณุชุฑุงุชูุฌูุงุช ููุญุตูู ุนูู ุงูุณุนุฑ ุงูุญู:

1. **API JSON ูู MSX** โ ูุญุงูู ุฌูุจ ุจูุงูุงุช JSON ูุจุงุดุฑุฉ
2. **HTML Scraping** โ ูุฌูุจ ููุญูู ุตูุญุงุช MSX.om
3. **ุฃุณุนุงุฑ ุงุญุชูุงุทูุฉ ูุฏููุฉ** โ ูู ููู `backend/.env.prices`

### ุชุญุฏูุซ ุงูุฃุณุนุงุฑ ูุฏููุงู

ุฅุฐุง ุชููู ุงูุฌูุจ ุงูุชููุงุฆูุ ูู ุจุชุนุฏูู ุงูููู `backend/.env.prices`:

```env
OQEP=0.466
OQPI=0.218
```

ุซู ุงุณุชุฎุฏู ุฒุฑ **"ุชุญุฏูุซ ุงูุฃุณุนุงุฑ"** ูู ุงูุชุทุจููุ ุฃู ุฃุฑุณู ุทูุจุงู:

```bash
curl -X POST http://localhost:8000/api/prices/refresh
```

---

## ูุนุงุฏูุงุช ุงูุญุณุงุจ

```
ุฑุจุญ ุงูุณูู       = ุณุนุฑ ุงูุฅุบูุงู - ุณุนุฑ ุงูุดุฑุงุก
ุฅุฌูุงูู ุงูุฑุจุญ    = ุฑุจุญ ุงูุณูู ร ุนุฏุฏ ุงูุฃุณูู
ุงููููุฉ ุงูุณูููุฉ  = ุณุนุฑ ุงูุฅุบูุงู ร ุนุฏุฏ ุงูุฃุณูู
ูุณุจุฉ ุงูุนุงุฆุฏ     = (ุฅุฌูุงูู ุงูุฑุจุญ รท ูููุฉ ุงูุงุณุชุซูุงุฑ) ร 100
```

### ุญุงูุฉ "ููุฏ" (ุตูุฏูู ุฅุดุฑุงู ุงููููู)

- ุงููููุฉ ุงูุณูููุฉ = ูููุฉ ุงูุงุณุชุซูุงุฑ (ูุง ููุฌุฏ ุชุบููุฑ)
- ุงูุฑุจุญ = 0
- ูุณุจุฉ ุงูุนุงุฆุฏ = 0ูช

---

## ููุงุท API ุงูุฑุฆูุณูุฉ

| ุงููุณุงุฑ | ุงููุตู |
|--------|-------|
| `GET /api/portfolio` | ูุงูู ุงููุญูุธุฉ ูุน ุงูุฃุณุนุงุฑ ูุงูุญุณุงุจุงุช |
| `GET /api/portfolio/{id}` | ุชูุงุตูู ูุฑูุฒ ูุนูู |
| `GET /api/summary` | ููุฎุต ุฅุฌูุงูู ุงููุญูุธุฉ |
| `GET /api/prices` | ุงูุฃุณุนุงุฑ ุงูุญูุฉ ุงููุฎุฒููุฉ |
| `POST /api/prices/refresh` | ุชุญุฏูุซ ููุฑู ูู MSX |

---

## ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

**ุงูุฎูููุฉ:** Python 3 | FastAPI | BeautifulSoup4 | APScheduler | httpx  
**ุงูุฃูุงููุฉ:** Next.js 14 | React 18 | TypeScript | SWR  
**ุงูุชุตููู:** CSS ูุฎุตุต | ุฎุท Tajawal | ุชุฎุทูุท RTL (ุนุฑุจู) | ููุท ุฏุงูู + ุฐูุจู
